import{a as e,b as t}from"./PgnOneInfoButC.31302594.js";import{_ as s}from"./MyDialogC.816c7ec1.js";import{_ as n,a as i}from"./FilterSourcesSelectC.f0e8e7fd.js";import{d as r,P as o,l as a,Z as l,H as c,a0 as u,o as d,c as h,_ as p,X as m,a as g,b as f,w as v,u as _,e as y,j as b,k as w,F as x,D as S,a3 as M,t as C,r as k,T as E,g as L,I as G,m as A,J as F,a4 as O,a5 as I,a6 as W,a7 as j,a8 as R,a9 as P,aa as $,L as N}from"./index.678e1d89.js";import{_ as V,b as J,N as B}from"./NotificationsClass.8995b915.js";import{_ as T}from"./MySwitchC.a84f8a03.js";import"./GraphDataClass.27253ea5.js";import"./LangSelectSwitchC.9f0983be.js";const D=p(r({__name:"SpnsSelectNumbC",props:{modelValue:{type:Array,reqired:!0,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:t}){const s=o(e,"modelValue",t),n=a(s.value.join(","));return l(n,(()=>{var e;const t=null==(e=n.value.match(/([0-9]*)/gm))?void 0:e.filter((e=>""!==e)).map((e=>Number.parseInt(e)));t&&(n.value=t.join(","),s.value=[...new Set(t)])}),{debounce:1e3,maxWait:5e3}),(e,t)=>c((d(),h("textarea",{class:"w3-input",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e)},null,512)),[[u,n.value]])}}),[["__file","/home/pavel/Документы/WEBPROJECTS/WebEmbeddedGithub/src/components/j1939/components/JParams/Filter/Groups/Spns/SpnsSelectNumbC.vue"]]),z=g("h5",null,"Выбор параметра",-1),U={style:{display:"inline-flex"}},q={style:{display:"inline-flex","padding-top":"4px"}},K=g("label",{style:{"margin-right":"8px"}},"Текущие",-1),H=g("label",null,"Номер",-1),X={style:{"margin-bottom":"6px","margin-left":"6px"}},Q=p(r({__name:"GroupSpnAddCard",emits:["selected"],setup(e,{emit:t}){const s=a(!1),n=m.selectedSpns,i=()=>{t("selected",[...m.selectedSpns.value])};return(e,t)=>{const r=T,o=V,a=pt,l=D;return d(),h(x,null,[z,g("div",U,[g("div",q,[K,f(r,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e)},null,8,["modelValue"]),H]),g("div",X,[f(w,{appear:"","enter-active-class":"animate__animated animate__zoomIn","leave-active-class":"animate__animated animate__zoomOut",mode:"out-in"},{default:v((()=>[_(n).length>0?(d(),y(o,{key:0,icon:"Checked",tooltip:"","with-badge":"","badge-text":_(n).length.toString(),"badge-type":"warn","badge-right-proc":-20,class:"icon-button",style:{color:"var(--color-ok)",cursor:"pointer","margin-left":"8px"},onClick:i},null,8,["badge-text"])):b("v-if",!0)])),_:1})])]),s.value?(d(),y(l,{key:1,modelValue:_(m).selectedSpns.value,"onUpdate:modelValue":t[1]||(t[1]=e=>_(m).selectedSpns.value=e)},null,8,["modelValue"])):(d(),y(a,{key:0,"is-select":"","list-heiht":"60vh"}))],64)}}}),[["__file","/home/pavel/Документы/WEBPROJECTS/WebEmbeddedGithub/src/components/j1939/components/JParams/Filter/Groups/Spns/GroupSpnAddCard.vue"]]),Z=p(r({__name:"GroupSpnAddButC",emits:["selected"],setup(e,{emit:t}){const n=a();a([]);const i=e=>{n.value.closeModal(),t("selected",e)};return(e,t)=>{const r=V,o=Q,a=s;return d(),y(a,{ref_key:"dialog",ref:n},{trigger:v((()=>[f(r,{icon:"Plus",tooltip:"Добавить..",size:"default",class:"icon-button",style:{color:"#3a3a3a"}})])),content:v((()=>[f(o,{onSelected:i})])),_:1},512)}}}),[["__file","/home/pavel/Документы/WEBPROJECTS/WebEmbeddedGithub/src/components/j1939/components/JParams/Filter/Groups/Spns/GroupSpnAddButC.vue"]]),Y=p(r({__name:"GroupSpnOneTagC",props:{spnD:{type:Number,required:!0}},emits:["deleted"],setup(t,{emit:n}){const i=t,r=a(),o=a(),l=a(!1),c=S(o),u=()=>{l.value=!0,r.value.closeModal(),n("deleted",i.spnD)};return(n,i)=>{const a=J,p=e,m=s;return d(),y(m,{ref_key:"dialog",ref:r,disabled:l.value},{trigger:v((()=>[t.spnD?(d(),h("div",{key:0,ref_key:"spnTag",ref:o,class:"w3-tag w3-xlarge w3-round-medium w3-theme-tag w3-hover-shadow",style:{cursor:"pointer",position:"relative"}},[M(C(t.spnD)+" ",1),_(c)?(d(),y(a,{key:0,"badge-type":"alarm","badge-is-button":"","badge-text":"X","text-top-proc":-10,"text-right-proc":-10,class:"w3-large",onClick:u})):b("v-if",!0)],512)):b("v-if",!0)])),content:v((()=>[g("div",null,[g("button",{class:"w3-button w3-round-xxlarge",style:{"background-color":"var(--color-alarm)"},onClick:u},"X"),f(p,{spn_id:`0_${t.spnD}`,"with-data":!1},null,8,["spn_id"])])])),_:1},8,["disabled"])}}}),[["__file","/home/pavel/Документы/WEBPROJECTS/WebEmbeddedGithub/src/components/j1939/components/JParams/Filter/Groups/Spns/GroupSpnOneTagC.vue"]]),ee={class:"grid-auto"},te=p(r({__name:"GroupSpnsTagsC",emits:["selected"],setup(e,{emit:t}){const s=a(m.selectedSpns.value),n=e=>{s.value=[...e],t("selected",s.value)},i=e=>{const n=s.value.findIndex((t=>t===e));m.selectedSpns.value.splice(n,1),s.value.splice(n,1),t("selected",s.value)};return(e,t)=>{const r=Y,o=Z;return d(),h("div",ee,[f(E,{name:"flip-list","enter-active-class":"animate__animated animate__zoomIn","leave-active-class":"animate__animated animate__zoomOut"},{default:v((()=>[(d(!0),h(x,null,k(s.value,(e=>(d(),y(r,{key:e,"spn-d":e,onDeleted:i,class:"animate__faster"},null,8,["spn-d"])))),128))])),_:1}),f(o,{onSelected:n,class:"w3-left"})])}}}),[["__file","/home/pavel/Документы/WEBPROJECTS/WebEmbeddedGithub/src/components/j1939/components/JParams/Filter/Groups/Spns/GroupSpnsTagsC.vue"]]),se={class:"padding-2",style:{"overflow-x":"clip"}},ne=g("h6",null,"Создать группу",-1),ie=g("label",null,"Параметры: ",-1),re=p(r({__name:"GroupAddEditC",props:{type:{type:String,default:()=>"add"},group:{type:Object,default:null}},emits:["edited","delete"],setup(e,{emit:t}){var s;const n=e,i=a((null==(s=n.group)?void 0:s.name)||""),r=a([]),o=L((()=>i.value.length>0&&r.value.length>0)),l=L((()=>m.filterSpnsGroups.value.findIndex((e=>e.name===i.value))>-1)),p=()=>{var e;const s={name:i.value,oldName:null==(e=n.group)?void 0:e.name,spns:r.value,selected:!1};t("edited",s)},y=()=>{var e;const s={name:i.value,oldName:null==(e=n.group)?void 0:e.name,spns:r.value,selected:!1};t("delete",s)},w=e=>{r.value=e};return"edit"===n.type&&n.group?m.selectedSpns.value=n.group.spns:m.selectedSpns.value=[],(e,t)=>{const s=te;return d(),h("div",se,[ne,c(g("input",{class:"w3-input w3-border w3-round padding-2",style:{width:"130px"},type:"text",placeholder:"Название группы","onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e)},null,512),[[u,i.value]]),g("div",null,[ie,f(s,{onSelected:w})]),f(E,{name:"flip-list","enter-active-class":"animate__animated animate__bounceInRight","leave-active-class":"animate__animated animate__bounceOutRight"},{default:v((()=>[_(o)?(d(),h("button",{key:0,class:"w3-button w3-theme-badge-ok w3-round-large w3-right w3-margin",onClick:p},"Ok")):b("v-if",!0)])),_:1}),f(E,{name:"flip-list","enter-active-class":"animate__animated animate__bounceInRight","leave-active-class":"animate__animated animate__bounceOutRight"},{default:v((()=>[_(l)?(d(),h("button",{key:0,class:"w3-button w3-theme-badge-alarm w3-round-large w3-right w3-margin",onClick:y},"Удалить")):b("v-if",!0)])),_:1})])}}}),[["__file","/home/pavel/Документы/WEBPROJECTS/WebEmbeddedGithub/src/components/j1939/components/JParams/Filter/Groups/GroupAddEditC.vue"]]),oe=p(r({__name:"GroupAddEditButC",props:{type:{type:String,default:()=>"add"},group:{type:Object}},setup(e){const t=a(),n=e=>{e.oldName&&delete e.oldName;const s=m.filterSpnsGroups.value.findIndex((t=>t.name===e.name));s>-1?m.filterSpnsGroups.value[s]=e:m.filterSpnsGroups.value.unshift(e),B.showNotify({type:"ok",duration_ms:1500,title:"Ok",text:"Успешно"}),t.value.closeModal()},i=e=>{const s=m.filterSpnsGroups.value.findIndex((t=>t.name===e.name));m.filterSpnsGroups.value.splice(s,1),t.value.closeModal()};return(r,o)=>{const a=V,l=re,c=s;return d(),y(c,{ref_key:"dialog",ref:t},{trigger:v((()=>[f(a,{icon:"add"===e.type?"Plus":"List",tooltip:"add"===e.type?"Добавить":"",size:"small",class:"icon-button w3-right",style:{color:"#3a3a3a"},"tooltip-pos-vert":"bottom","tooltip-pos-hor":"left"},null,8,["icon","tooltip"])])),content:v((()=>[f(l,{onEdited:n,onDelete:i,type:e.type,group:e.group},null,8,["type","group"])])),_:1},512)}}}),[["__file","/home/pavel/Документы/WEBPROJECTS/WebEmbeddedGithub/src/components/j1939/components/JParams/Filter/Groups/GroupAddEditButC.vue"]]),ae={class:"w3-row w3-border w3-round-small padding-2"},le={style:{display:"inline-block",width:"130px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},ce=p(r({__name:"GroupOneC",props:{group:{type:Object}},setup(e){const t=()=>{};return(s,n)=>{const i=oe;return d(),h("div",ae,[f(i,{type:"edit",group:e.group},null,8,["group"]),c(g("input",{class:"w3-check",type:"checkbox","onUpdate:modelValue":n[0]||(n[0]=t=>e.group.selected=t),onChange:t,style:{"padding-top":"9px",width:"30px"}},null,544),[[G,e.group.selected]]),g("span",le,C(e.group.name),1)])}}}),[["__file","/home/pavel/Документы/WEBPROJECTS/WebEmbeddedGithub/src/components/j1939/components/JParams/Filter/Groups/GroupOneC.vue"]]),ue={style:{width:"100%",height:"100%","overflow-x":"clip","padding-top":"20px"}},de=p(r({__name:"GroupsAllC",setup(e){const t=m.filterSpnsGroups;return(e,s)=>{const n=oe,i=ce;return d(),h("div",null,[f(n),g("div",ue,[(d(!0),h(x,null,k(_(t),(e=>(d(),y(i,{key:e.name,style:{width:"100%"},group:e},null,8,["group"])))),128))])])}}}),[["__file","/home/pavel/Документы/WEBPROJECTS/WebEmbeddedGithub/src/components/j1939/components/JParams/Filter/Groups/GroupsAllC.vue"]]),he=g("button",{class:"w3-button w3-border padding-2 w3-round-medium"},"Группы",-1),pe=p(r({__name:"GroupsSelectButC",setup(e){const t=a("info"),s=L((()=>{let e="нет";t.value="info";const s=m.filterSpnsGroups.value.filter((e=>e.selected)).map((e=>e.name));return 0===s.length||(t.value="warn",e=s.length.toString()),e}));return(e,i)=>{const r=J,o=de,a=n;return d(),y(a,null,{trigget:v((()=>[he,f(r,{"badge-text":_(s),"text-right-proc":-20,"text-top-proc":-20,"badge-type":t.value},null,8,["badge-text","badge-type"])])),options:v((()=>[f(o)])),_:1})}}}),[["__file","/home/pavel/Документы/WEBPROJECTS/WebEmbeddedGithub/src/components/j1939/components/JParams/Filter/Groups/GroupsSelectButC.vue"]]),me={style:{height:"70vh"}},ge={class:"w3-container"},fe={class:"w3-row w3-margin-top"},ve={class:"w3-row w3-margin-top"},_e={class:"w3-row w3-margin-top"},ye={class:"w3-row w3-margin-top"},be={class:"w3-row w3-margin-top"},we=p(r({__name:"FilterSpnsFormC",setup(e){const t=m.filterObj;return A(t.value,(()=>{F.resetAllSpns()}),{deep:!0}),(e,s)=>{const n=T,r=pe;return d(),h("div",me,[g("div",ge,[g("div",fe,[f(n,{modelValue:_(t).showNumbVals,"onUpdate:modelValue":s[0]||(s[0]=e=>_(t).showNumbVals=e),label:"Показывать байтовые",class:"w3-left"},null,8,["modelValue"])]),g("div",ve,[f(n,{modelValue:_(t).showBitsVals,"onUpdate:modelValue":s[1]||(s[1]=e=>_(t).showBitsVals=e),label:"Показывать битовые",class:"w3-left"},null,8,["modelValue"])]),g("div",_e,[f(n,{modelValue:_(t).showEdgeVals,"onUpdate:modelValue":s[2]||(s[2]=e=>_(t).showEdgeVals=e),label:"Параметры вне предела",class:"w3-left"},null,8,["modelValue"])]),g("div",ye,[f(i,{modelValue:_(t).infilterEcuAdrs,"onUpdate:modelValue":s[3]||(s[3]=e=>_(t).infilterEcuAdrs=e),class:"w3-left"},null,8,["modelValue"])]),g("div",be,[f(r,{class:"w3-left"})]),b('        <GroupsSelectC class="w3-display-left"></GroupsSelectC>')])])}}}),[["__file","/home/pavel/Документы/WEBPROJECTS/WebEmbeddedGithub/src/components/j1939/components/JParams/Filter/FilterSpnsFormC.vue"]]),xe=p(r({__name:"FilterSpnsButC",setup(e){const t=a(!1),n=L((()=>O(m.defaultFilter,m.filterObj.value)));return(e,i)=>{const r=V,o=we,a=s;return d(),h("div",null,[f(a,{"animate-direction":"left"},{trigger:v((()=>[f(r,{icon:"Filter","badge-is-dot":!_(n),tooltip:"Фильтр",class:"icon-button",onClick:i[0]||(i[0]=e=>t.value=!t.value)},null,8,["badge-is-dot"])])),content:v((()=>[f(o)])),_:1})])}}}),[["__file","/home/pavel/Документы/WEBPROJECTS/WebEmbeddedGithub/src/components/j1939/components/JParams/Filter/FilterSpnsButC.vue"]]);function Se(e){return Array.isArray?Array.isArray(e):"[object Array]"===Ae(e)}function Me(e){return"string"==typeof e}function Ce(e){return"number"==typeof e}function ke(e){return!0===e||!1===e||function(e){return Ee(e)&&null!==e}(e)&&"[object Boolean]"==Ae(e)}function Ee(e){return"object"==typeof e}function Le(e){return null!=e}function Ge(e){return!e.trim().length}function Ae(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Fe=Object.prototype.hasOwnProperty;class Oe{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let s=Ie(e);t+=s.weight,this._keys.push(s),this._keyMap[s.id]=s,t+=s.weight})),this._keys.forEach((e=>{e.weight/=t}))}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Ie(e){let t=null,s=null,n=null,i=1,r=null;if(Me(e)||Se(e))n=e,t=We(e),s=je(e);else{if(!Fe.call(e,"name"))throw new Error((e=>`Missing ${e} property in key`)("name"));const o=e.name;if(n=o,Fe.call(e,"weight")&&(i=e.weight,i<=0))throw new Error((e=>`Property 'weight' in key '${e}' must be a positive integer`)(o));t=We(o),s=je(o),r=e.getFn}return{path:t,id:s,weight:i,src:n,getFn:r}}function We(e){return Se(e)?e:e.split(".")}function je(e){return Se(e)?e.join("."):e}var Re={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(e,t){let s=[],n=!1;const i=(e,t,r)=>{if(Le(e))if(t[r]){const o=e[t[r]];if(!Le(o))return;if(r===t.length-1&&(Me(o)||Ce(o)||ke(o)))s.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(o));else if(Se(o)){n=!0;for(let e=0,s=o.length;e<s;e+=1)i(o[e],t,r+1)}else t.length&&i(o,t,r+1)}else s.push(e)};return i(e,Me(t)?t.split("."):t,0),n?s:s[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const Pe=/[^ ]+/g;class $e{constructor({getFn:e=Re.getFn,fieldNormWeight:t=Re.fieldNormWeight}={}){this.norm=function(e=1,t=3){const s=new Map,n=Math.pow(10,t);return{get(t){const i=t.match(Pe).length;if(s.has(i))return s.get(i);const r=1/Math.pow(i,.5*e),o=parseFloat(Math.round(r*n)/n);return s.set(i,o),o},clear(){s.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,Me(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const t=this.size();Me(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,s=this.size();t<s;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Le(e)||Ge(e))return;let s={v:e,i:t,n:this.norm.get(e)};this.records.push(s)}_addObject(e,t){let s={i:t,$:{}};this.keys.forEach(((t,n)=>{let i=t.getFn?t.getFn(e):this.getFn(e,t.path);if(Le(i))if(Se(i)){let e=[];const t=[{nestedArrIndex:-1,value:i}];for(;t.length;){const{nestedArrIndex:s,value:n}=t.pop();if(Le(n))if(Me(n)&&!Ge(n)){let t={v:n,i:s,n:this.norm.get(n)};e.push(t)}else Se(n)&&n.forEach(((e,s)=>{t.push({nestedArrIndex:s,value:e})}))}s.$[n]=e}else if(Me(i)&&!Ge(i)){let e={v:i,n:this.norm.get(i)};s.$[n]=e}})),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function Ne(e,t,{getFn:s=Re.getFn,fieldNormWeight:n=Re.fieldNormWeight}={}){const i=new $e({getFn:s,fieldNormWeight:n});return i.setKeys(e.map(Ie)),i.setSources(t),i.create(),i}function Ve(e,{errors:t=0,currentLocation:s=0,expectedLocation:n=0,distance:i=Re.distance,ignoreLocation:r=Re.ignoreLocation}={}){const o=t/e.length;if(r)return o;const a=Math.abs(n-s);return i?o+a/i:a?1:o}function Je(e,t,s,{location:n=Re.location,distance:i=Re.distance,threshold:r=Re.threshold,findAllMatches:o=Re.findAllMatches,minMatchCharLength:a=Re.minMatchCharLength,includeMatches:l=Re.includeMatches,ignoreLocation:c=Re.ignoreLocation}={}){if(t.length>32)throw new Error(`Pattern length exceeds max of ${32}.`);const u=t.length,d=e.length,h=Math.max(0,Math.min(n,d));let p=r,m=h;const g=a>1||l,f=g?Array(d):[];let v;for(;(v=e.indexOf(t,m))>-1;){let e=Ve(t,{currentLocation:v,expectedLocation:h,distance:i,ignoreLocation:c});if(p=Math.min(e,p),m=v+u,g){let e=0;for(;e<u;)f[v+e]=1,e+=1}}m=-1;let _=[],y=1,b=u+d;const w=1<<u-1;for(let S=0;S<u;S+=1){let n=0,r=b;for(;n<r;){Ve(t,{errors:S,currentLocation:h+r,expectedLocation:h,distance:i,ignoreLocation:c})<=p?n=r:b=r,r=Math.floor((b-n)/2+n)}b=r;let a=Math.max(1,h-r+1),l=o?d:Math.min(h+r,d)+u,v=Array(l+2);v[l+1]=(1<<S)-1;for(let o=l;o>=a;o-=1){let n=o-1,r=s[e.charAt(n)];if(g&&(f[n]=+!!r),v[o]=(v[o+1]<<1|1)&r,S&&(v[o]|=(_[o+1]|_[o])<<1|1|_[o+1]),v[o]&w&&(y=Ve(t,{errors:S,currentLocation:n,expectedLocation:h,distance:i,ignoreLocation:c}),y<=p)){if(p=y,m=n,m<=h)break;a=Math.max(1,2*h-m)}}if(Ve(t,{errors:S+1,currentLocation:h,expectedLocation:h,distance:i,ignoreLocation:c})>p)break;_=v}const x={isMatch:m>=0,score:Math.max(.001,y)};if(g){const e=function(e=[],t=Re.minMatchCharLength){let s=[],n=-1,i=-1,r=0;for(let o=e.length;r<o;r+=1){let o=e[r];o&&-1===n?n=r:o||-1===n||(i=r-1,i-n+1>=t&&s.push([n,i]),n=-1)}return e[r-1]&&r-n>=t&&s.push([n,r-1]),s}(f,a);e.length?l&&(x.indices=e):x.isMatch=!1}return x}function Be(e){let t={};for(let s=0,n=e.length;s<n;s+=1){const i=e.charAt(s);t[i]=(t[i]||0)|1<<n-s-1}return t}class Te{constructor(e,{location:t=Re.location,threshold:s=Re.threshold,distance:n=Re.distance,includeMatches:i=Re.includeMatches,findAllMatches:r=Re.findAllMatches,minMatchCharLength:o=Re.minMatchCharLength,isCaseSensitive:a=Re.isCaseSensitive,ignoreLocation:l=Re.ignoreLocation}={}){if(this.options={location:t,threshold:s,distance:n,includeMatches:i,findAllMatches:r,minMatchCharLength:o,isCaseSensitive:a,ignoreLocation:l},this.pattern=a?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(e,t)=>{this.chunks.push({pattern:e,alphabet:Be(e),startIndex:t})},u=this.pattern.length;if(u>32){let e=0;const t=u%32,s=u-t;for(;e<s;)c(this.pattern.substr(e,32),e),e+=32;if(t){const e=u-32;c(this.pattern.substr(e),e)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:s}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return s&&(t.indices=[[0,e.length-1]]),t}const{location:n,distance:i,threshold:r,findAllMatches:o,minMatchCharLength:a,ignoreLocation:l}=this.options;let c=[],u=0,d=!1;this.chunks.forEach((({pattern:t,alphabet:h,startIndex:p})=>{const{isMatch:m,score:g,indices:f}=Je(e,t,h,{location:n+p,distance:i,threshold:r,findAllMatches:o,minMatchCharLength:a,includeMatches:s,ignoreLocation:l});m&&(d=!0),u+=g,m&&f&&(c=[...c,...f])}));let h={isMatch:d,score:d?u/this.chunks.length:1};return d&&s&&(h.indices=c),h}}class De{constructor(e){this.pattern=e}static isMultiMatch(e){return ze(e,this.multiRegex)}static isSingleMatch(e){return ze(e,this.singleRegex)}search(){}}function ze(e,t){const s=e.match(t);return s?s[1]:null}class Ue extends De{constructor(e,{location:t=Re.location,threshold:s=Re.threshold,distance:n=Re.distance,includeMatches:i=Re.includeMatches,findAllMatches:r=Re.findAllMatches,minMatchCharLength:o=Re.minMatchCharLength,isCaseSensitive:a=Re.isCaseSensitive,ignoreLocation:l=Re.ignoreLocation}={}){super(e),this._bitapSearch=new Te(e,{location:t,threshold:s,distance:n,includeMatches:i,findAllMatches:r,minMatchCharLength:o,isCaseSensitive:a,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class qe extends De{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,s=0;const n=[],i=this.pattern.length;for(;(t=e.indexOf(this.pattern,s))>-1;)s=t+i,n.push([t,s-1]);const r=!!n.length;return{isMatch:r,score:r?0:1,indices:n}}}const Ke=[class extends De{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},qe,class extends De{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends De{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends De{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends De{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends De{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},Ue],He=Ke.length,Xe=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const Qe=new Set([Ue.type,qe.type]);class Ze{constructor(e,{isCaseSensitive:t=Re.isCaseSensitive,includeMatches:s=Re.includeMatches,minMatchCharLength:n=Re.minMatchCharLength,ignoreLocation:i=Re.ignoreLocation,findAllMatches:r=Re.findAllMatches,location:o=Re.location,threshold:a=Re.threshold,distance:l=Re.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:s,minMatchCharLength:n,findAllMatches:r,ignoreLocation:i,location:o,threshold:a,distance:l},this.pattern=t?e:e.toLowerCase(),this.query=function(e,t={}){return e.split("|").map((e=>{let s=e.trim().split(Xe).filter((e=>e&&!!e.trim())),n=[];for(let i=0,r=s.length;i<r;i+=1){const e=s[i];let r=!1,o=-1;for(;!r&&++o<He;){const s=Ke[o];let i=s.isMultiMatch(e);i&&(n.push(new s(i,t)),r=!0)}if(!r)for(o=-1;++o<He;){const s=Ke[o];let i=s.isSingleMatch(e);if(i){n.push(new s(i,t));break}}}return n}))}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:n}=this.options;e=n?e:e.toLowerCase();let i=0,r=[],o=0;for(let a=0,l=t.length;a<l;a+=1){const n=t[a];r.length=0,i=0;for(let t=0,a=n.length;t<a;t+=1){const a=n[t],{isMatch:l,indices:c,score:u}=a.search(e);if(!l){o=0,i=0,r.length=0;break}if(i+=1,o+=u,s){const e=a.constructor.type;Qe.has(e)?r=[...r,...c]:r.push(c)}}if(i){let e={isMatch:!0,score:o/i};return s&&(e.indices=r),e}}return{isMatch:!1,score:1}}}const Ye=[];function et(e,t){for(let s=0,n=Ye.length;s<n;s+=1){let n=Ye[s];if(n.condition(e,t))return new n(e,t)}return new Te(e,t)}const tt="$and",st="$or",nt="$path",it="$val",rt=e=>!(!e[tt]&&!e[st]),ot=e=>({[tt]:Object.keys(e).map((t=>({[t]:e[t]})))});function at(e,t,{auto:s=!0}={}){const n=e=>{let i=Object.keys(e);const r=(e=>!!e[nt])(e);if(!r&&i.length>1&&!rt(e))return n(ot(e));if((e=>!Se(e)&&Ee(e)&&!rt(e))(e)){const n=r?e[nt]:i[0],o=r?e[it]:e[n];if(!Me(o))throw new Error((e=>`Invalid value for key ${e}`)(n));const a={keyId:je(n),pattern:o};return s&&(a.searcher=et(o,t)),a}let o={children:[],operator:i[0]};return i.forEach((t=>{const s=e[t];Se(s)&&s.forEach((e=>{o.children.push(n(e))}))})),o};return rt(e)||(e=ot(e)),n(e)}function lt(e,t){const s=e.matches;t.matches=[],Le(s)&&s.forEach((e=>{if(!Le(e.indices)||!e.indices.length)return;const{indices:s,value:n}=e;let i={indices:s,value:n};e.key&&(i.key=e.key.src),e.idx>-1&&(i.refIndex=e.idx),t.matches.push(i)}))}function ct(e,t){t.score=e.score}class ut{constructor(e,t={},s){this.options={...Re,...t},this.options.useExtendedSearch,this._keyStore=new Oe(this.options.keys),this.setCollection(e,s)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof $e))throw new Error("Incorrect 'index' type");this._myIndex=t||Ne(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Le(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=(()=>!1)){const t=[];for(let s=0,n=this._docs.length;s<n;s+=1){const i=this._docs[s];e(i,s)&&(this.removeAt(s),s-=1,n-=1,t.push(i))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:s,includeScore:n,shouldSort:i,sortFn:r,ignoreFieldNorm:o}=this.options;let a=Me(e)?Me(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=Re.ignoreFieldNorm}){e.forEach((e=>{let s=1;e.matches.forEach((({key:e,norm:n,score:i})=>{const r=e?e.weight:null;s*=Math.pow(0===i&&r?Number.EPSILON:i,(r||1)*(t?1:n))})),e.score=s}))}(a,{ignoreFieldNorm:o}),i&&a.sort(r),Ce(t)&&t>-1&&(a=a.slice(0,t)),function(e,t,{includeMatches:s=Re.includeMatches,includeScore:n=Re.includeScore}={}){const i=[];return s&&i.push(lt),n&&i.push(ct),e.map((e=>{const{idx:s}=e,n={item:t[s],refIndex:s};return i.length&&i.forEach((t=>{t(e,n)})),n}))}(a,this._docs,{includeMatches:s,includeScore:n})}_searchStringList(e){const t=et(e,this.options),{records:s}=this._myIndex,n=[];return s.forEach((({v:e,i:s,n:i})=>{if(!Le(e))return;const{isMatch:r,score:o,indices:a}=t.searchIn(e);r&&n.push({item:e,idx:s,matches:[{score:o,value:e,norm:i,indices:a}]})})),n}_searchLogical(e){const t=at(e,this.options),s=(e,t,n)=>{if(!e.children){const{keyId:s,searcher:i}=e,r=this._findMatches({key:this._keyStore.get(s),value:this._myIndex.getValueForItemAtKeyId(t,s),searcher:i});return r&&r.length?[{idx:n,item:t,matches:r}]:[]}const i=[];for(let r=0,o=e.children.length;r<o;r+=1){const o=e.children[r],a=s(o,t,n);if(a.length)i.push(...a);else if(e.operator===tt)return[]}return i},n=this._myIndex.records,i={},r=[];return n.forEach((({$:e,i:n})=>{if(Le(e)){let o=s(t,e,n);o.length&&(i[n]||(i[n]={idx:n,item:e,matches:[]},r.push(i[n])),o.forEach((({matches:e})=>{i[n].matches.push(...e)})))}})),r}_searchObjectList(e){const t=et(e,this.options),{keys:s,records:n}=this._myIndex,i=[];return n.forEach((({$:e,i:n})=>{if(!Le(e))return;let r=[];s.forEach(((s,n)=>{r.push(...this._findMatches({key:s,value:e[n],searcher:t}))})),r.length&&i.push({idx:n,item:e,matches:r})})),i}_findMatches({key:e,value:t,searcher:s}){if(!Le(t))return[];let n=[];if(Se(t))t.forEach((({v:t,i:i,n:r})=>{if(!Le(t))return;const{isMatch:o,score:a,indices:l}=s.searchIn(t);o&&n.push({score:a,key:e,value:t,idx:i,norm:r,indices:l})}));else{const{v:i,n:r}=t,{isMatch:o,score:a,indices:l}=s.searchIn(i);o&&n.push({score:a,key:e,value:i,norm:r,indices:l})}return n}}ut.version="6.6.2",ut.createIndex=Ne,ut.parseIndex=function(e,{getFn:t=Re.getFn,fieldNormWeight:s=Re.fieldNormWeight}={}){const{keys:n,records:i}=e,r=new $e({getFn:t,fieldNormWeight:s});return r.setKeys(n),r.setIndexRecords(i),r},ut.config=Re,ut.parseQuery=at,function(...e){Ye.push(...e)}(Ze);const dt={key:0},ht={class:"w3-bar"},pt=p(r({__name:"SpnDataAllC",props:{isSelect:{type:Boolean,default:()=>!1},listHeiht:{type:String}},setup(e){const s=e,n=a(!1),i=a(""),r=W(i,700),o=L((()=>({fuseOptions:{keys:["name_ru","name"],isCaseSensitive:!1,threshold:void 0},resultLimit:void 0,matchAllWhenSearchEmpty:!0}))),{results:l}=function(e,t,s){const n=()=>{var e,n;return new ut(null!=(e=I(t))?e:[],null==(n=I(s))?void 0:n.fuseOptions)},i=a(n());A((()=>{var e;return null==(e=I(s))?void 0:e.fuseOptions}),(()=>{i.value=n()}),{deep:!0}),A((()=>I(t)),(e=>{i.value.setCollection(e)}),{deep:!0});const r=L((()=>{const n=I(s);if((null==n?void 0:n.matchAllWhenSearchEmpty)&&!_(e))return I(t).map(((e,t)=>({item:e,refIndex:t})));const r=null==n?void 0:n.resultLimit;return i.value.search(I(e),r?{limit:r}:void 0)}));return{fuse:i,results:r}}(r,s.isSelect?F.allSpns:F.filteredSpns,o),{list:p,containerProps:m,wrapperProps:v,scrollTo:w}=j(l,{itemHeight:80,overscan:2});return A((()=>r.value),(()=>{w(0)})),n.value=!0,(r,o)=>{const a=xe,l=t;return n.value?(d(),h("div",dt,[g("div",ht,[e.isSelect?b("v-if",!0):(d(),y(a,{key:0,class:"w3-bar-item padding-2"})),c(g("input",{class:"w3-bar-item w3-input w3-border w3-round padding-2",style:{"margin-left":"6px"},type:"search",placeholder:"Поиск...","onUpdate:modelValue":o[0]||(o[0]=e=>i.value=e)},null,512),[[u,i.value]])]),g("div",$({ref:"scrolEl"},_(m),{class:"w3-card-2 w3-border w3-border-theme w3-round params-list",style:`height:${s.listHeiht}`}),[g("div",R(P(_(v))),[(d(!0),h(x,null,k(_(p),(t=>(d(),h("div",{key:t.data.item._id},[f(l,{spn:t.data.item,"with-pgn-link":!e.isSelect,"is-select":e.isSelect},null,8,["spn","with-pgn-link","is-select"])])))),128))],16)],16)])):b("v-if",!0)}}}),[["__scopeId","data-v-e1bcbb54"],["__file","/home/pavel/Документы/WEBPROJECTS/WebEmbeddedGithub/src/components/j1939/components/JParams/Spns/SpnDataAllC.vue"]]),mt=p(r({__name:"J1939DataV",setup(e){const t=L((()=>N.isDeviceMobile.value&&N.isFullscreen.value?"85vh":N.isDeviceMobile.value?"72vh":"85vh"));return(e,s)=>{const n=pt;return d(),y(n,{"list-heiht":_(t)},null,8,["list-heiht"])}}}),[["__file","/home/pavel/Документы/WEBPROJECTS/WebEmbeddedGithub/src/router/views/layoutviews/J1939DataV.vue"]]);export{mt as default};
