import{a as e,b as t}from"./PgnOneInfoButC.vue_vue_type_script_setup_true_lang.bb517e1f.js";import{_ as s}from"./MyDialogC.5a19b343.js";import{_ as n,a as i}from"./FilterSourcesSelectC.vue_vue_type_script_setup_true_lang.78ed9591.js";import{d as r,P as a,l as o,Z as l,H as c,$ as u,o as h,c as d,X as p,a as g,b as m,w as f,u as v,e as y,j as _,k as w,F as x,D as b,a2 as M,t as S,r as k,T as C,g as L,I,m as A,J as E,a3 as $,a4 as F,a5 as N,a6 as O,a7 as V,a8 as j,a9 as R,L as G}from"./index.3d8eecac.js";import{_ as W,b as D,N as z}from"./NotificationsClass.1488b90c.js";import{_ as U}from"./MySwitchC.634f0b7a.js";import{_ as P}from"./_plugin-vue_export-helper.cdc0426e.js";import"./GraphDataClass.22dbb449.js";import"./LangSelectSwitchC.vue_vue_type_script_setup_true_lang.e21d6001.js";const B=r({__name:"SpnsSelectNumbC",props:{modelValue:{type:Array,reqired:!0,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:t}){const s=a(e,"modelValue",t),n=o(s.value.join(","));return l(n,(()=>{var e;const t=null==(e=n.value.match(/([0-9]*)/gm))?void 0:e.filter((e=>""!==e)).map((e=>Number.parseInt(e)));t&&(n.value=t.join(","),s.value=[...new Set(t)])}),{debounce:1e3,maxWait:5e3}),(e,t)=>c((h(),d("textarea",{class:"w3-input",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e)},null,512)),[[u,n.value]])}}),q=g("h5",null,"Выбор параметра",-1),J={style:{display:"inline-flex"}},K={style:{display:"inline-flex","padding-top":"4px"}},T=g("label",{style:{"margin-right":"8px"}},"Текущие",-1),H=g("label",null,"Номер",-1),X={style:{"margin-bottom":"6px","margin-left":"6px"}},Q=r({__name:"GroupSpnAddCard",emits:["selected"],setup(e,{emit:t}){const s=o(!1),n=p.selectedSpns,i=()=>{t("selected",[...p.selectedSpns.value])};return(e,t)=>{const r=U,a=W,o=pt,l=B;return h(),d(x,null,[q,g("div",J,[g("div",K,[T,m(r,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e)},null,8,["modelValue"]),H]),g("div",X,[m(w,{appear:"","enter-active-class":"animate__animated animate__zoomIn","leave-active-class":"animate__animated animate__zoomOut",mode:"out-in"},{default:f((()=>[v(n).length>0?(h(),y(a,{key:0,icon:"Checked",tooltip:"","with-badge":"","badge-text":v(n).length.toString(),"badge-type":"warn","badge-right-proc":-20,class:"icon-button",style:{color:"var(--color-ok)",cursor:"pointer","margin-left":"8px"},onClick:i},null,8,["badge-text"])):_("",!0)])),_:1})])]),s.value?(h(),y(l,{key:1,modelValue:v(p).selectedSpns.value,"onUpdate:modelValue":t[1]||(t[1]=e=>v(p).selectedSpns.value=e)},null,8,["modelValue"])):(h(),y(o,{key:0,"is-select":"","list-heiht":"60vh"}))],64)}}}),Z=r({__name:"GroupSpnAddButC",emits:["selected"],setup(e,{emit:t}){const n=o();o([]);const i=e=>{n.value.closeModal(),t("selected",e)};return(e,t)=>{const r=W,a=Q,o=s;return h(),y(o,{ref_key:"dialog",ref:n},{trigger:f((()=>[m(r,{icon:"Plus",tooltip:"Добавить..",size:"default",class:"icon-button",style:{color:"#3a3a3a"}})])),content:f((()=>[m(a,{onSelected:i})])),_:1},512)}}}),Y=r({__name:"GroupSpnOneTagC",props:{spnD:{type:Number,required:!0}},emits:["deleted"],setup(t,{emit:n}){const i=t,r=o(),a=o(),l=o(!1),c=b(a),u=()=>{l.value=!0,r.value.closeModal(),n("deleted",i.spnD)};return(n,i)=>{const o=D,p=e,w=s;return h(),y(w,{ref_key:"dialog",ref:r,disabled:l.value},{trigger:f((()=>[t.spnD?(h(),d("div",{key:0,ref_key:"spnTag",ref:a,class:"w3-tag w3-xlarge w3-round-medium w3-theme-tag w3-hover-shadow",style:{cursor:"pointer",position:"relative"}},[M(S(t.spnD)+" ",1),v(c)?(h(),y(o,{key:0,"badge-type":"alarm","badge-is-button":"","badge-text":"X","text-top-proc":-10,"text-right-proc":-10,class:"w3-large",onClick:u})):_("",!0)],512)):_("",!0)])),content:f((()=>[g("div",null,[g("button",{class:"w3-button w3-round-xxlarge",style:{"background-color":"var(--color-alarm)"},onClick:u},"X"),m(p,{spn_id:`0_${t.spnD}`,"with-data":!1},null,8,["spn_id"])])])),_:1},8,["disabled"])}}}),ee={class:"grid-auto"},te=r({__name:"GroupSpnsTagsC",emits:["selected"],setup(e,{emit:t}){const s=o(p.selectedSpns.value),n=e=>{s.value=[...e],t("selected",s.value)},i=e=>{const n=s.value.findIndex((t=>t===e));p.selectedSpns.value.splice(n,1),s.value.splice(n,1),t("selected",s.value)};return(e,t)=>{const r=Y,a=Z;return h(),d("div",ee,[m(C,{name:"flip-list","enter-active-class":"animate__animated animate__zoomIn","leave-active-class":"animate__animated animate__zoomOut"},{default:f((()=>[(h(!0),d(x,null,k(s.value,(e=>(h(),y(r,{key:e,"spn-d":e,onDeleted:i,class:"animate__faster"},null,8,["spn-d"])))),128))])),_:1}),m(a,{onSelected:n,class:"w3-left"})])}}}),se={class:"padding-2",style:{"overflow-x":"clip"}},ne=g("h6",null,"Создать группу",-1),ie=g("label",null,"Параметры: ",-1),re=r({__name:"GroupAddEditC",props:{type:{type:String,default:()=>"add"},group:{type:Object,default:null}},emits:["edited","delete"],setup(e,{emit:t}){var s;const n=e,i=o((null==(s=n.group)?void 0:s.name)||""),r=o([]),a=L((()=>i.value.length>0&&r.value.length>0)),l=L((()=>p.filterSpnsGroups.value.findIndex((e=>e.name===i.value))>-1)),y=()=>{var e;const s={name:i.value,oldName:null==(e=n.group)?void 0:e.name,spns:r.value,selected:!1};t("edited",s)},w=()=>{var e;const s={name:i.value,oldName:null==(e=n.group)?void 0:e.name,spns:r.value,selected:!1};t("delete",s)},x=e=>{r.value=e};return"edit"===n.type&&n.group?p.selectedSpns.value=n.group.spns:p.selectedSpns.value=[],(e,t)=>{const s=te;return h(),d("div",se,[ne,c(g("input",{class:"w3-input w3-border w3-round padding-2",style:{width:"130px"},type:"text",placeholder:"Название группы","onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e)},null,512),[[u,i.value]]),g("div",null,[ie,m(s,{onSelected:x})]),m(C,{name:"flip-list","enter-active-class":"animate__animated animate__bounceInRight","leave-active-class":"animate__animated animate__bounceOutRight"},{default:f((()=>[v(a)?(h(),d("button",{key:0,class:"w3-button w3-theme-badge-ok w3-round-large w3-right w3-margin",onClick:y},"Ok")):_("",!0)])),_:1}),m(C,{name:"flip-list","enter-active-class":"animate__animated animate__bounceInRight","leave-active-class":"animate__animated animate__bounceOutRight"},{default:f((()=>[v(l)?(h(),d("button",{key:0,class:"w3-button w3-theme-badge-alarm w3-round-large w3-right w3-margin",onClick:w},"Удалить")):_("",!0)])),_:1})])}}}),ae=r({__name:"GroupAddEditButC",props:{type:{type:String,default:()=>"add"},group:{type:Object}},setup(e){const t=o(),n=e=>{e.oldName&&delete e.oldName;const s=p.filterSpnsGroups.value.findIndex((t=>t.name===e.name));s>-1?p.filterSpnsGroups.value[s]=e:p.filterSpnsGroups.value.unshift(e),z.showNotify({type:"ok",duration_ms:1500,title:"Ok",text:"Успешно"}),t.value.closeModal()},i=e=>{const s=p.filterSpnsGroups.value.findIndex((t=>t.name===e.name));p.filterSpnsGroups.value.splice(s,1),t.value.closeModal()};return(r,a)=>{const o=W,l=re,c=s;return h(),y(c,{ref_key:"dialog",ref:t},{trigger:f((()=>[m(o,{icon:"add"===e.type?"Plus":"List",tooltip:"add"===e.type?"Добавить":"",size:"small",class:"icon-button w3-right",style:{color:"#3a3a3a"},"tooltip-pos-vert":"bottom","tooltip-pos-hor":"left"},null,8,["icon","tooltip"])])),content:f((()=>[m(l,{onEdited:n,onDelete:i,type:e.type,group:e.group},null,8,["type","group"])])),_:1},512)}}}),oe={class:"w3-row w3-border w3-round-small padding-2"},le={style:{display:"inline-block",width:"130px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},ce=r({__name:"GroupOneC",props:{group:{type:Object}},setup(e){const t=()=>{};return(s,n)=>{const i=ae;return h(),d("div",oe,[m(i,{type:"edit",group:e.group},null,8,["group"]),c(g("input",{class:"w3-check",type:"checkbox","onUpdate:modelValue":n[0]||(n[0]=t=>e.group.selected=t),onChange:t,style:{"padding-top":"9px",width:"30px"}},null,544),[[I,e.group.selected]]),g("span",le,S(e.group.name),1)])}}}),ue={style:{width:"100%",height:"100%","overflow-x":"clip","padding-top":"20px"}},he=r({__name:"GroupsAllC",setup(e){const t=p.filterSpnsGroups;return(e,s)=>{const n=ae,i=ce;return h(),d("div",null,[m(n),g("div",ue,[(h(!0),d(x,null,k(v(t),(e=>(h(),y(i,{key:e.name,style:{width:"100%"},group:e},null,8,["group"])))),128))])])}}}),de=g("button",{class:"w3-button w3-border padding-2 w3-round-medium"},"Группы",-1),pe=r({__name:"GroupsSelectButC",setup(e){const t=o("info"),s=L((()=>{let e="нет";t.value="info";const s=p.filterSpnsGroups.value.filter((e=>e.selected)).map((e=>e.name));return 0===s.length||(t.value="warn",e=s.length.toString()),e}));return(e,i)=>{const r=D,a=he,o=n;return h(),y(o,null,{trigget:f((()=>[de,m(r,{"badge-text":v(s),"text-right-proc":-20,"text-top-proc":-20,"badge-type":t.value},null,8,["badge-text","badge-type"])])),options:f((()=>[m(a)])),_:1})}}}),ge={style:{height:"70vh"}},me={class:"w3-container"},fe={class:"w3-row w3-margin-top"},ve={class:"w3-row w3-margin-top"},ye={class:"w3-row w3-margin-top"},_e={class:"w3-row w3-margin-top"},we={class:"w3-row w3-margin-top"},xe=r({__name:"FilterSpnsFormC",setup(e){const t=p.filterObj;return A(t.value,(()=>{E.resetAllSpns()}),{deep:!0}),(e,s)=>{const n=U,r=pe;return h(),d("div",ge,[g("div",me,[g("div",fe,[m(n,{modelValue:v(t).showNumbVals,"onUpdate:modelValue":s[0]||(s[0]=e=>v(t).showNumbVals=e),label:"Показывать байтовые",class:"w3-left"},null,8,["modelValue"])]),g("div",ve,[m(n,{modelValue:v(t).showBitsVals,"onUpdate:modelValue":s[1]||(s[1]=e=>v(t).showBitsVals=e),label:"Показывать битовые",class:"w3-left"},null,8,["modelValue"])]),g("div",ye,[m(n,{modelValue:v(t).showEdgeVals,"onUpdate:modelValue":s[2]||(s[2]=e=>v(t).showEdgeVals=e),label:"Параметры вне предела",class:"w3-left"},null,8,["modelValue"])]),g("div",_e,[m(i,{modelValue:v(t).infilterEcuAdrs,"onUpdate:modelValue":s[3]||(s[3]=e=>v(t).infilterEcuAdrs=e),class:"w3-left"},null,8,["modelValue"])]),g("div",we,[m(r,{class:"w3-left"})])])])}}}),be=r({__name:"FilterSpnsButC",setup(e){const t=o(!1),n=L((()=>$(p.defaultFilter,p.filterObj.value)));return(e,i)=>{const r=W,a=xe,o=s;return h(),d("div",null,[m(o,{"animate-direction":"left"},{trigger:f((()=>[m(r,{icon:"Filter","badge-is-dot":!v(n),tooltip:"Фильтр",class:"icon-button",onClick:i[0]||(i[0]=e=>t.value=!t.value)},null,8,["badge-is-dot"])])),content:f((()=>[m(a)])),_:1})])}}});function Me(e){return Array.isArray?Array.isArray(e):"[object Array]"===Ee(e)}function Se(e){return"string"==typeof e}function ke(e){return"number"==typeof e}function Ce(e){return!0===e||!1===e||function(e){return Le(e)&&null!==e}(e)&&"[object Boolean]"==Ee(e)}function Le(e){return"object"==typeof e}function Ie(e){return null!=e}function Ae(e){return!e.trim().length}function Ee(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const $e=Object.prototype.hasOwnProperty;class Fe{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let s=Ne(e);t+=s.weight,this._keys.push(s),this._keyMap[s.id]=s,t+=s.weight})),this._keys.forEach((e=>{e.weight/=t}))}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Ne(e){let t=null,s=null,n=null,i=1,r=null;if(Se(e)||Me(e))n=e,t=Oe(e),s=Ve(e);else{if(!$e.call(e,"name"))throw new Error((e=>`Missing ${e} property in key`)("name"));const a=e.name;if(n=a,$e.call(e,"weight")&&(i=e.weight,i<=0))throw new Error((e=>`Property 'weight' in key '${e}' must be a positive integer`)(a));t=Oe(a),s=Ve(a),r=e.getFn}return{path:t,id:s,weight:i,src:n,getFn:r}}function Oe(e){return Me(e)?e:e.split(".")}function Ve(e){return Me(e)?e.join("."):e}var je={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(e,t){let s=[],n=!1;const i=(e,t,r)=>{if(Ie(e))if(t[r]){const a=e[t[r]];if(!Ie(a))return;if(r===t.length-1&&(Se(a)||ke(a)||Ce(a)))s.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(a));else if(Me(a)){n=!0;for(let e=0,s=a.length;e<s;e+=1)i(a[e],t,r+1)}else t.length&&i(a,t,r+1)}else s.push(e)};return i(e,Se(t)?t.split("."):t,0),n?s:s[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const Re=/[^ ]+/g;class Ge{constructor({getFn:e=je.getFn,fieldNormWeight:t=je.fieldNormWeight}={}){this.norm=function(e=1,t=3){const s=new Map,n=Math.pow(10,t);return{get(t){const i=t.match(Re).length;if(s.has(i))return s.get(i);const r=1/Math.pow(i,.5*e),a=parseFloat(Math.round(r*n)/n);return s.set(i,a),a},clear(){s.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,Se(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const t=this.size();Se(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,s=this.size();t<s;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Ie(e)||Ae(e))return;let s={v:e,i:t,n:this.norm.get(e)};this.records.push(s)}_addObject(e,t){let s={i:t,$:{}};this.keys.forEach(((t,n)=>{let i=t.getFn?t.getFn(e):this.getFn(e,t.path);if(Ie(i))if(Me(i)){let e=[];const t=[{nestedArrIndex:-1,value:i}];for(;t.length;){const{nestedArrIndex:s,value:n}=t.pop();if(Ie(n))if(Se(n)&&!Ae(n)){let t={v:n,i:s,n:this.norm.get(n)};e.push(t)}else Me(n)&&n.forEach(((e,s)=>{t.push({nestedArrIndex:s,value:e})}))}s.$[n]=e}else if(Se(i)&&!Ae(i)){let e={v:i,n:this.norm.get(i)};s.$[n]=e}})),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function We(e,t,{getFn:s=je.getFn,fieldNormWeight:n=je.fieldNormWeight}={}){const i=new Ge({getFn:s,fieldNormWeight:n});return i.setKeys(e.map(Ne)),i.setSources(t),i.create(),i}function De(e,{errors:t=0,currentLocation:s=0,expectedLocation:n=0,distance:i=je.distance,ignoreLocation:r=je.ignoreLocation}={}){const a=t/e.length;if(r)return a;const o=Math.abs(n-s);return i?a+o/i:o?1:a}function ze(e,t,s,{location:n=je.location,distance:i=je.distance,threshold:r=je.threshold,findAllMatches:a=je.findAllMatches,minMatchCharLength:o=je.minMatchCharLength,includeMatches:l=je.includeMatches,ignoreLocation:c=je.ignoreLocation}={}){if(t.length>32)throw new Error(`Pattern length exceeds max of ${32}.`);const u=t.length,h=e.length,d=Math.max(0,Math.min(n,h));let p=r,g=d;const m=o>1||l,f=m?Array(h):[];let v;for(;(v=e.indexOf(t,g))>-1;){let e=De(t,{currentLocation:v,expectedLocation:d,distance:i,ignoreLocation:c});if(p=Math.min(e,p),g=v+u,m){let e=0;for(;e<u;)f[v+e]=1,e+=1}}g=-1;let y=[],_=1,w=u+h;const x=1<<u-1;for(let M=0;M<u;M+=1){let n=0,r=w;for(;n<r;){De(t,{errors:M,currentLocation:d+r,expectedLocation:d,distance:i,ignoreLocation:c})<=p?n=r:w=r,r=Math.floor((w-n)/2+n)}w=r;let o=Math.max(1,d-r+1),l=a?h:Math.min(d+r,h)+u,v=Array(l+2);v[l+1]=(1<<M)-1;for(let a=l;a>=o;a-=1){let n=a-1,r=s[e.charAt(n)];if(m&&(f[n]=+!!r),v[a]=(v[a+1]<<1|1)&r,M&&(v[a]|=(y[a+1]|y[a])<<1|1|y[a+1]),v[a]&x&&(_=De(t,{errors:M,currentLocation:n,expectedLocation:d,distance:i,ignoreLocation:c}),_<=p)){if(p=_,g=n,g<=d)break;o=Math.max(1,2*d-g)}}if(De(t,{errors:M+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:c})>p)break;y=v}const b={isMatch:g>=0,score:Math.max(.001,_)};if(m){const e=function(e=[],t=je.minMatchCharLength){let s=[],n=-1,i=-1,r=0;for(let a=e.length;r<a;r+=1){let a=e[r];a&&-1===n?n=r:a||-1===n||(i=r-1,i-n+1>=t&&s.push([n,i]),n=-1)}return e[r-1]&&r-n>=t&&s.push([n,r-1]),s}(f,o);e.length?l&&(b.indices=e):b.isMatch=!1}return b}function Ue(e){let t={};for(let s=0,n=e.length;s<n;s+=1){const i=e.charAt(s);t[i]=(t[i]||0)|1<<n-s-1}return t}class Pe{constructor(e,{location:t=je.location,threshold:s=je.threshold,distance:n=je.distance,includeMatches:i=je.includeMatches,findAllMatches:r=je.findAllMatches,minMatchCharLength:a=je.minMatchCharLength,isCaseSensitive:o=je.isCaseSensitive,ignoreLocation:l=je.ignoreLocation}={}){if(this.options={location:t,threshold:s,distance:n,includeMatches:i,findAllMatches:r,minMatchCharLength:a,isCaseSensitive:o,ignoreLocation:l},this.pattern=o?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(e,t)=>{this.chunks.push({pattern:e,alphabet:Ue(e),startIndex:t})},u=this.pattern.length;if(u>32){let e=0;const t=u%32,s=u-t;for(;e<s;)c(this.pattern.substr(e,32),e),e+=32;if(t){const e=u-32;c(this.pattern.substr(e),e)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:s}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return s&&(t.indices=[[0,e.length-1]]),t}const{location:n,distance:i,threshold:r,findAllMatches:a,minMatchCharLength:o,ignoreLocation:l}=this.options;let c=[],u=0,h=!1;this.chunks.forEach((({pattern:t,alphabet:d,startIndex:p})=>{const{isMatch:g,score:m,indices:f}=ze(e,t,d,{location:n+p,distance:i,threshold:r,findAllMatches:a,minMatchCharLength:o,includeMatches:s,ignoreLocation:l});g&&(h=!0),u+=m,g&&f&&(c=[...c,...f])}));let d={isMatch:h,score:h?u/this.chunks.length:1};return h&&s&&(d.indices=c),d}}class Be{constructor(e){this.pattern=e}static isMultiMatch(e){return qe(e,this.multiRegex)}static isSingleMatch(e){return qe(e,this.singleRegex)}search(){}}function qe(e,t){const s=e.match(t);return s?s[1]:null}class Je extends Be{constructor(e,{location:t=je.location,threshold:s=je.threshold,distance:n=je.distance,includeMatches:i=je.includeMatches,findAllMatches:r=je.findAllMatches,minMatchCharLength:a=je.minMatchCharLength,isCaseSensitive:o=je.isCaseSensitive,ignoreLocation:l=je.ignoreLocation}={}){super(e),this._bitapSearch=new Pe(e,{location:t,threshold:s,distance:n,includeMatches:i,findAllMatches:r,minMatchCharLength:a,isCaseSensitive:o,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Ke extends Be{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,s=0;const n=[],i=this.pattern.length;for(;(t=e.indexOf(this.pattern,s))>-1;)s=t+i,n.push([t,s-1]);const r=!!n.length;return{isMatch:r,score:r?0:1,indices:n}}}const Te=[class extends Be{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},Ke,class extends Be{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends Be{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends Be{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends Be{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends Be{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},Je],He=Te.length,Xe=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const Qe=new Set([Je.type,Ke.type]);class Ze{constructor(e,{isCaseSensitive:t=je.isCaseSensitive,includeMatches:s=je.includeMatches,minMatchCharLength:n=je.minMatchCharLength,ignoreLocation:i=je.ignoreLocation,findAllMatches:r=je.findAllMatches,location:a=je.location,threshold:o=je.threshold,distance:l=je.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:s,minMatchCharLength:n,findAllMatches:r,ignoreLocation:i,location:a,threshold:o,distance:l},this.pattern=t?e:e.toLowerCase(),this.query=function(e,t={}){return e.split("|").map((e=>{let s=e.trim().split(Xe).filter((e=>e&&!!e.trim())),n=[];for(let i=0,r=s.length;i<r;i+=1){const e=s[i];let r=!1,a=-1;for(;!r&&++a<He;){const s=Te[a];let i=s.isMultiMatch(e);i&&(n.push(new s(i,t)),r=!0)}if(!r)for(a=-1;++a<He;){const s=Te[a];let i=s.isSingleMatch(e);if(i){n.push(new s(i,t));break}}}return n}))}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:n}=this.options;e=n?e:e.toLowerCase();let i=0,r=[],a=0;for(let o=0,l=t.length;o<l;o+=1){const n=t[o];r.length=0,i=0;for(let t=0,o=n.length;t<o;t+=1){const o=n[t],{isMatch:l,indices:c,score:u}=o.search(e);if(!l){a=0,i=0,r.length=0;break}if(i+=1,a+=u,s){const e=o.constructor.type;Qe.has(e)?r=[...r,...c]:r.push(c)}}if(i){let e={isMatch:!0,score:a/i};return s&&(e.indices=r),e}}return{isMatch:!1,score:1}}}const Ye=[];function et(e,t){for(let s=0,n=Ye.length;s<n;s+=1){let n=Ye[s];if(n.condition(e,t))return new n(e,t)}return new Pe(e,t)}const tt="$and",st="$or",nt="$path",it="$val",rt=e=>!(!e[tt]&&!e[st]),at=e=>({[tt]:Object.keys(e).map((t=>({[t]:e[t]})))});function ot(e,t,{auto:s=!0}={}){const n=e=>{let i=Object.keys(e);const r=(e=>!!e[nt])(e);if(!r&&i.length>1&&!rt(e))return n(at(e));if((e=>!Me(e)&&Le(e)&&!rt(e))(e)){const n=r?e[nt]:i[0],a=r?e[it]:e[n];if(!Se(a))throw new Error((e=>`Invalid value for key ${e}`)(n));const o={keyId:Ve(n),pattern:a};return s&&(o.searcher=et(a,t)),o}let a={children:[],operator:i[0]};return i.forEach((t=>{const s=e[t];Me(s)&&s.forEach((e=>{a.children.push(n(e))}))})),a};return rt(e)||(e=at(e)),n(e)}function lt(e,t){const s=e.matches;t.matches=[],Ie(s)&&s.forEach((e=>{if(!Ie(e.indices)||!e.indices.length)return;const{indices:s,value:n}=e;let i={indices:s,value:n};e.key&&(i.key=e.key.src),e.idx>-1&&(i.refIndex=e.idx),t.matches.push(i)}))}function ct(e,t){t.score=e.score}class ut{constructor(e,t={},s){this.options={...je,...t},this.options.useExtendedSearch,this._keyStore=new Fe(this.options.keys),this.setCollection(e,s)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof Ge))throw new Error("Incorrect 'index' type");this._myIndex=t||We(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Ie(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=(()=>!1)){const t=[];for(let s=0,n=this._docs.length;s<n;s+=1){const i=this._docs[s];e(i,s)&&(this.removeAt(s),s-=1,n-=1,t.push(i))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:s,includeScore:n,shouldSort:i,sortFn:r,ignoreFieldNorm:a}=this.options;let o=Se(e)?Se(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=je.ignoreFieldNorm}){e.forEach((e=>{let s=1;e.matches.forEach((({key:e,norm:n,score:i})=>{const r=e?e.weight:null;s*=Math.pow(0===i&&r?Number.EPSILON:i,(r||1)*(t?1:n))})),e.score=s}))}(o,{ignoreFieldNorm:a}),i&&o.sort(r),ke(t)&&t>-1&&(o=o.slice(0,t)),function(e,t,{includeMatches:s=je.includeMatches,includeScore:n=je.includeScore}={}){const i=[];return s&&i.push(lt),n&&i.push(ct),e.map((e=>{const{idx:s}=e,n={item:t[s],refIndex:s};return i.length&&i.forEach((t=>{t(e,n)})),n}))}(o,this._docs,{includeMatches:s,includeScore:n})}_searchStringList(e){const t=et(e,this.options),{records:s}=this._myIndex,n=[];return s.forEach((({v:e,i:s,n:i})=>{if(!Ie(e))return;const{isMatch:r,score:a,indices:o}=t.searchIn(e);r&&n.push({item:e,idx:s,matches:[{score:a,value:e,norm:i,indices:o}]})})),n}_searchLogical(e){const t=ot(e,this.options),s=(e,t,n)=>{if(!e.children){const{keyId:s,searcher:i}=e,r=this._findMatches({key:this._keyStore.get(s),value:this._myIndex.getValueForItemAtKeyId(t,s),searcher:i});return r&&r.length?[{idx:n,item:t,matches:r}]:[]}const i=[];for(let r=0,a=e.children.length;r<a;r+=1){const a=e.children[r],o=s(a,t,n);if(o.length)i.push(...o);else if(e.operator===tt)return[]}return i},n=this._myIndex.records,i={},r=[];return n.forEach((({$:e,i:n})=>{if(Ie(e)){let a=s(t,e,n);a.length&&(i[n]||(i[n]={idx:n,item:e,matches:[]},r.push(i[n])),a.forEach((({matches:e})=>{i[n].matches.push(...e)})))}})),r}_searchObjectList(e){const t=et(e,this.options),{keys:s,records:n}=this._myIndex,i=[];return n.forEach((({$:e,i:n})=>{if(!Ie(e))return;let r=[];s.forEach(((s,n)=>{r.push(...this._findMatches({key:s,value:e[n],searcher:t}))})),r.length&&i.push({idx:n,item:e,matches:r})})),i}_findMatches({key:e,value:t,searcher:s}){if(!Ie(t))return[];let n=[];if(Me(t))t.forEach((({v:t,i:i,n:r})=>{if(!Ie(t))return;const{isMatch:a,score:o,indices:l}=s.searchIn(t);a&&n.push({score:o,key:e,value:t,idx:i,norm:r,indices:l})}));else{const{v:i,n:r}=t,{isMatch:a,score:o,indices:l}=s.searchIn(i);a&&n.push({score:o,key:e,value:i,norm:r,indices:l})}return n}}ut.version="6.6.2",ut.createIndex=We,ut.parseIndex=function(e,{getFn:t=je.getFn,fieldNormWeight:s=je.fieldNormWeight}={}){const{keys:n,records:i}=e,r=new Ge({getFn:t,fieldNormWeight:s});return r.setKeys(n),r.setIndexRecords(i),r},ut.config=je,ut.parseQuery=ot,function(...e){Ye.push(...e)}(Ze);const ht={key:0},dt={class:"w3-bar"},pt=P(r({__name:"SpnDataAllC",props:{isSelect:{type:Boolean,default:()=>!1},listHeiht:{type:String}},setup(e){const s=e,n=o(!1),i=o(""),r=N(i,700),a=L((()=>({fuseOptions:{keys:["name_ru","name"],isCaseSensitive:!1,threshold:void 0},resultLimit:void 0,matchAllWhenSearchEmpty:!0}))),{results:l}=function(e,t,s){const n=()=>{var e,n;return new ut(null!=(e=F(t))?e:[],null==(n=F(s))?void 0:n.fuseOptions)},i=o(n());A((()=>{var e;return null==(e=F(s))?void 0:e.fuseOptions}),(()=>{i.value=n()}),{deep:!0}),A((()=>F(t)),(e=>{i.value.setCollection(e)}),{deep:!0});const r=L((()=>{const n=F(s);if((null==n?void 0:n.matchAllWhenSearchEmpty)&&!v(e))return F(t).map(((e,t)=>({item:e,refIndex:t})));const r=null==n?void 0:n.resultLimit;return i.value.search(F(e),r?{limit:r}:void 0)}));return{fuse:i,results:r}}(r,s.isSelect?E.allSpns:E.filteredSpns,a),{list:p,containerProps:f,wrapperProps:w,scrollTo:b}=O(l,{itemHeight:80,overscan:2});return A((()=>r.value),(()=>{b(0)})),n.value=!0,(r,a)=>{const o=be,l=t;return n.value?(h(),d("div",ht,[g("div",dt,[e.isSelect?_("",!0):(h(),y(o,{key:0,class:"w3-bar-item padding-2"})),c(g("input",{class:"w3-bar-item w3-input w3-border w3-round padding-2",style:{"margin-left":"6px"},type:"search",placeholder:"Поиск...","onUpdate:modelValue":a[0]||(a[0]=e=>i.value=e)},null,512),[[u,i.value]])]),g("div",R({ref:"scrolEl"},v(f),{class:"w3-card-2 w3-border w3-border-theme w3-round params-list",style:`height:${s.listHeiht}`}),[g("div",V(j(v(w))),[(h(!0),d(x,null,k(v(p),(t=>(h(),d("div",{key:t.data.item._id},[m(l,{spn:t.data.item,"with-pgn-link":!e.isSelect,"is-select":e.isSelect},null,8,["spn","with-pgn-link","is-select"])])))),128))],16)],16)])):_("",!0)}}}),[["__scopeId","data-v-fcf564f8"]]),gt=r({__name:"J1939DataV",setup(e){const t=L((()=>G.isDeviceMobile.value&&G.isFullscreen.value?"85vh":G.isDeviceMobile.value?"72vh":"85vh"));return(e,s)=>{const n=pt;return h(),y(n,{"list-heiht":v(t)},null,8,["list-heiht"])}}});export{gt as default};
