import{_ as e}from"./MyDialogC.5a19b343.js";import{_ as a}from"./NotificationsClass.1488b90c.js";import{d as l,U as s,o as n,e as i,w as t,u as d,i as r,j as o,k as u,R as p,l as c,m as v,V as g,g as w,y as m,c as b,a as y,t as _,b as f,X as h,Y as k,J as S,Z as I,_ as x,v as C,H as P,I as z,x as D,q,F as B,r as L}from"./index.3d8eecac.js";import{_ as j}from"./MySwitchC.634f0b7a.js";import{G}from"./GraphDataClass.22dbb449.js";import{_ as E}from"./LangSelectSwitchC.vue_vue_type_script_setup_true_lang.e21d6001.js";const A=l({__name:"SpnGoToButC",props:{trigger:{type:Boolean,default:!1},icon:{type:String,required:!0},routeName:{type:String,required:!0},tooltip:{type:String,required:!0},colorVar:{type:String,required:!0}},setup(e){const l=e,c=s(l);return(e,s)=>{const v=a;return n(),i(u,{appear:"","enter-active-class":"animate__animated animate__bounceInLeft","leave-active-class":"animate__animated animate__bounceOutRight",mode:"out-in"},{default:t((()=>[d(c).trigger.value?(n(),i(v,{key:0,icon:d(c).icon.value,tooltip:d(c).tooltip.value,class:"icon-size-default",style:r(`color: var(${d(c).colorVar.value}); cursor: pointer`),onClick:s[0]||(s[0]=e=>{p.goToName(l.routeName)})},null,8,["icon","tooltip","style"])):o("",!0)])),_:1})}}}),N=l({__name:"SpnToGraphSwitchC",props:{spn_id:{type:String,required:!0}},setup(e){const a=e,l=c(G.spnIdExistInList(a.spn_id));return v((()=>l.value),(()=>{G.addDeleteSpnId(a.spn_id,l.value)})),(e,a)=>{const s=j;return n(),i(s,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e)},null,8,["modelValue"])}}}),O={key:0,class:"w3-card"},R={class:"w3-bar",style:{width:"100%"}},T=y("label",{class:"w3-bar-item w3-padding-small",style:{"font-size":"16px","font-weight":"bold"}},"Название: ",-1),V={class:"w3-bar-item w3-padding-small"},$={key:0,style:{width:"100%"}},M=y("label",{class:"w3-bar-item w3-padding-small",style:{"font-size":"16px","font-weight":"bold"}},"Значение: ",-1),F={class:"w3-bar-item w3-padding-small description-value"},J={class:"w3-bar",style:{width:"100%"}},U=y("label",{class:"w3-bar-item w3-padding-small",style:{"font-size":"16px","font-weight":"bold"}},"Пределы: ",-1),H={class:"w3-bar-item w3-padding-small description-value"},W={class:"w3-bar"},X=y("label",{class:"w3-bar-item w3-padding-small",style:{"font-size":"16px","font-weight":"bold"}},"Перевод: ",-1),Y={key:1,class:"w3-bar"},Z=y("label",{class:"w3-bar-item w3-padding-small",style:{"font-size":"16px","font-weight":"bold"}},"На график: ",-1),K={class:"w3-bar"},Q=y("label",{class:"w3-bar-item w3-padding-small",style:{"font-size":"16px","font-weight":"bold"}},"Описание: ",-1),ee={class:"w3-bar-item w3-padding-small"},ae={key:2,class:"w3-bar"},le=y("label",{class:"w3-bar-item w3-padding-small",style:{"font-size":"16px","font-weight":"bold"}},"Получен от устройства: ",-1),se={class:"w3-bar-item w3-padding-small"},ne={class:"w3-bar"},ie=y("label",{class:"w3-bar-item w3-padding-small",style:{"font-size":"16px","font-weight":"bold"}},"Входит в группу: ",-1),te={key:1,class:"w3-bar-item w3-padding-small"},de=l({__name:"SpnDescriptionC",props:{spn_id:{type:String,required:!0},withPgnLink:{type:Boolean,default:!1},withData:{type:Boolean,default:!0}},setup(e){var a;const l=e,s=c(!1),t=g("decoder"),r=t.getSpnPrint(l.spn_id),u=r._id,p=r.id,v=r.srsAdr,h=w((()=>`${r.value.value} ${(null==r?void 0:r.unit)||""}`)),k=(null==(a=t.availableEcus.value.find((e=>e.srcAdr==r.srsAdr)))?void 0:a.alias)||"",S=c(),I=c(),x=c(),C=c(""),P=w((()=>t.langIsRu.value?r.name_ru:r.name)),z=w((()=>t.langIsRu.value?r.discr_ru:r.discr_en));return m((async()=>{var e,a;S.value=await t.getSpnTemplate(r.id),I.value=await t.getPgnTemplate((null==(e=S.value)?void 0:e.PGNref)||999999),C.value=(null==(a=I.value)?void 0:a.short)||"",x.value=t.allPgns.value.find((e=>{var a;return e.lid===(null==(a=S.value)?void 0:a.PGNref)})),s.value=!0})),(a,l)=>{var t,r;const c=E,g=N,w=Oe;return s.value?(n(),b("div",O,[y("div",R,[T,y("span",V,_(d(P))+" ("+_(d(p))+")",1)]),e.withData?(n(),b("div",$,[M,y("label",F,_(d(h)),1)])):o("",!0),y("div",J,[U,y("label",H,_(null==(t=S.value)?void 0:t.data_range),1)]),y("div",W,[X,f(c,{class:"w3-bar-item w3-padding-small"})]),e.withData?(n(),b("div",Y,[Z,f(g,{class:"w3-bar-item w3-padding-small",spn_id:d(u)},null,8,["spn_id"])])):o("",!0),y("div",K,[Q,y("label",ee,_(d(z)),1)]),e.withData?(n(),b("div",ae,[le,y("label",se,_(d(v))+" ("+_(d(k))+")",1)])):o("",!0),y("div",ne,[ie,e.withPgnLink&&x.value?(n(),i(w,{key:0,class:"w3-bar-item w3-padding-small","pgn-id":null==(r=x.value)?void 0:r._id},null,8,["pgn-id"])):(n(),b("label",te,"("+_(C.value)+")",1))])])):o("",!0)}}}),re=l({__name:"SpnDescriptionButC",props:{spn_id:{type:String,required:!0},withPgnLink:{type:Boolean,default:!1}},setup:l=>(s,d)=>{const r=a,o=de,u=e;return n(),i(u,null,{trigger:t((()=>[f(r,{icon:"Menu",tooltip:"Подробнее...",class:"icon-button",size:"small"})])),content:t((()=>[f(o,{class:"w3-container",spn_id:l.spn_id,"with-pgn-link":l.withPgnLink},null,8,["spn_id","with-pgn-link"])])),_:1})}}),oe={class:"w3-card-2 w3-hover-shadow w3-border-theme w3-border w3-round-medium w3-padding-small card-common"},ue={style:{display:"inline-flex"}},pe={class:"w3-bar-item w3-padding-small",style:{display:"inline-grid"}},ce={class:"w3-text-theme fill-content-dots"},ve={class:"w3-row"},ge={class:"fill-content-dots",style:{"font-weight":"bold"}},we=l({__name:"SpnOneC",props:{spn:{type:Object,required:!0},withPgnLink:{type:Boolean,default:!1},isSelect:{type:Boolean,default:()=>!1}},setup(e){const a=e,l=c(""),{isOutOfBound:t,value:u}=s(a.spn),p=c(""),v=w((()=>h.selectedSpns.value.findIndex((e=>e===a.spn.id))>-1)),g=e=>{if(e.target.checked)h.selectedSpns.value.push(a.spn.id);else{const e=h.selectedSpns.value.findIndex((e=>e===a.spn.id));h.selectedSpns.value.splice(e,1)}},m=c(),{pause:f}=k((()=>{m.value=S.ErrorsDecoder.activeErrorsArr.value.find((e=>S.ErrorsDecoder.getSpnIdFromErr(e)===a.spn._id))}),1e3,{immediate:!0}),q=w((()=>S.langIsRu.value?a.spn.name_ru:a.spn.name));I(u,(()=>{l.value=`${u.value} ${a.spn.unit||""}`,p.value=S.unitsColorsObj.value[a.spn.unit||"str"]}),{debounce:200,maxWait:500,immediate:!0});const B=w((()=>!!m.value)),L=w((()=>{var e,a,l,s;return m.value?(null==(e=m.value)?void 0:e.description)?S.ErrorsDecoder.langSelect.value?null==(l=m.value)?void 0:l.description.fmi.name_ru:null==(s=m.value)?void 0:s.description.fmi.name_en:`FMI -${null==(a=m.value)?void 0:a.FMI}`:""})),j=x(G.spnsInGraphIds,(e=>e===a.spn._id));return C((()=>f())),(a,s)=>{const t=re,u=A;return n(),b("div",oe,[y("div",ue,[e.isSelect?P((n(),b("input",{key:0,class:"w3-check w3-theme",type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=e=>D(v)?v.value=e:null),onChange:g},null,544)),[[z,d(v)]]):(n(),i(t,{key:1,class:"w3-bar-item w3-padding-small",style:{width:"30px"},spn_id:e.spn._id,"with-pgn-link":e.withPgnLink},null,8,["spn_id","with-pgn-link"])),y("div",pe,[y("span",ce,_(d(q)),1)]),e.isSelect?o("",!0):(n(),i(u,{key:2,class:"w3-padding-small",tooltip:"Есть на графике",icon:"LineGraphIn","color-var":"--color-info-blue","route-name":"JGraph",trigger:d(j)>-1},null,8,["trigger"])),e.isSelect?o("",!0):(n(),i(u,{key:3,class:"w3-padding-small",tooltip:d(L),icon:"CodesActive","color-var":"--color-alarm","route-name":"JActiveCodes",trigger:d(B)},null,8,["tooltip","trigger"]))]),y("div",ve,[y("div",{class:"w3-card w3-margin-left w3-round padding-2",style:r(`display: inline-grid; background-color: #${p.value}40`)},[y("label",ge,_(l.value),1)],4)])])}}}),me={key:0},be={key:0,class:"w3-card"},ye={class:"w3-bar-item padding-2"},_e={class:"w3-bar"},fe=y("label",{class:"w3-bar-item padding-2",style:{"font-size":"16px","font-weight":"bold"}},"Получен от устройства: ",-1),he={class:"w3-bar-item padding-2"},ke={class:"w3-bar"},Se=y("label",{class:"w3-bar-item padding-2",style:{"font-size":"16px","font-weight":"bold"}},"Название: ",-1),Ie={class:"w3-bar-item description-value padding-2"},xe={class:"w3-bar"},Ce=y("label",{class:"w3-bar-item padding-2",style:{"font-size":"16px","font-weight":"bold"}},"Значение: ",-1),Pe={class:"w3-bar-item padding-2 description-value"},ze={class:"w3-bar"},De=y("label",{class:"w3-bar-item padding-2",style:{"font-size":"16px","font-weight":"bold"}},"Перевод: ",-1),qe={class:"w3-bar"},Be=y("label",{class:"w3-bar-item padding-2",style:{"font-size":"16px","font-weight":"bold"}},"Описание: ",-1),Le={class:"w3-bar-item padding-2 description-value"},je=y("label",{class:"padding-2",style:{"font-size":"16px","font-weight":"bold"}},"Параметры в группе: ",-1),Ge={class:"params-list"},Ee={key:1},Ae=l({__name:"PgnDescriptionC",props:{pgnId:{type:String,required:!0}},setup(e){var a;const l=e,s=c(!1),t=c(),r=c([]),u=c([]),p=l.pgnId.split("_")[0],v=(null==(a=S.availableEcus.value.find((e=>e.srcAdr.toString()===p)))?void 0:a.alias)||"",g=w((()=>{var e;const a=null==(e=S.allPgns.value.find((e=>e._id===l.pgnId)))?void 0:e.d.value;return a?q(a):""})),h=w((()=>{var e,a;return S.langIsRu.value?null==(e=t.value)?void 0:e.name_ru:null==(a=t.value)?void 0:a.name_en})),k=w((()=>{var e,a;return S.langIsRu.value?null==(e=t.value)?void 0:e.descr_ru:null==(a=t.value)?void 0:a.descr_en}));return m((async()=>{t.value=await S.getPgnTemplate(l.pgnId),t.value&&(u.value=t.value.spns.map((e=>e.SPNd))||[],r.value=S.allSpns.value.filter((e=>u.value.includes(e.id))),s.value=!0)})),(e,a)=>{const l=E,u=we;return s.value?(n(),b("div",me,[t.value?(n(),b("div",be,[y("label",ye,_(t.value.short),1),y("div",_e,[fe,y("label",he,_(d(p))+" ("+_(d(v))+")",1)]),y("div",ke,[Se,y("span",Ie,_(d(h)),1)]),y("div",xe,[Ce,y("label",Pe,_(d(g)),1)]),y("div",ze,[De,f(l,{class:"w3-bar-item padding-2"})]),y("div",qe,[Be,y("label",Le,_(d(k)),1)]),je,y("div",Ge,[(n(!0),b(B,null,L(r.value,(e=>(n(),i(u,{key:e._id,spn:e},null,8,["spn"])))),128))])])):(n(),b("span",Ee,"Нет информации"))])):o("",!0)}}}),Ne={key:0},Oe=l({__name:"PgnOneInfoButC",props:{pgnId:{type:String,required:!0}},setup(a){const l=a,s=c(!1),d=c(!1),r=c();return m((async()=>{var e;r.value=await S.getPgnTemplate(l.pgnId),r.value&&(null==(e=r.value)?void 0:e.short)&&(s.value=!0)})),(l,u)=>{const p=Ae,c=e;return s.value?(n(),b("div",Ne,[f(c,null,{trigger:t((()=>[y("span",{class:"w3-hover-grayscale icon-button w3-hover-text-theme w3-text-theme-ok",onClick:u[0]||(u[0]=e=>{d.value=!d.value})},"("+_(r.value.short||"?")+")",1)])),content:t((()=>[d.value?(n(),i(p,{key:0,pgnId:a.pgnId},null,8,["pgnId"])):o("",!0)])),_:1})])):o("",!0)}}});export{Oe as _,de as a,we as b};
